<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Strict//EN">
<html>
<head>
<meta http-equiv="Content-Language" content="en-us">
<title>IupMatrix</title>
<link rel="stylesheet" type="text/css" href="../../style.css">
<style type="text/css">
.style1 {
	color: #FF0000;
}
</style>
</head>
<body>
<div id="navigation">
  <ul>
    <li><a href="#Creation">Creation</a></li>
    <li><a href="#Attributes">Attributes</a></li>
    <li><a href="#Callbacks">Callbacks</a></li>
    <li><a href="#Notes">Notes</a></li>
    <li><a href="#Examples">Examples</a></li>
    <li><a href="#SeeAlso">See Also</a></li>
  </ul>
</div>

<h2>IupMatrix</h2>
<p>Creates a matrix of alphanumeric fields. 
  Therefore, all values of the matrixs fields are strings. The matrix is not a grid container like many systems 
  have. It inherits from 
<a href="../elem/iupcanvas.html">IupCanvas</a>.</p>
<p>This is an additional control that depends on the CD library. It is included 
in the 
<a href="../iupcontrols.html">Controls Library</a>.</p>
<p>It has two modes of operation: normal and callback mode. In normal mode string values are stored in attributes for 
  each cell. In callback mode these attributes are ignored and the cells are filled with strings returned by the &quot;VALUE_CB&quot; 
  callback. So the existance of this callback defines the mode the matrix will operate.</p>
<h3><a name="Creation">Creation</a></h3>
<div>
  <pre>Ihandle* IupMatrix(char *<strong>action_cb</strong>); [in C]
iup.matrix{} -&gt; (<strong>elem</strong>: ihandle) [in Lua]
matrix(<strong>action_cb</strong>) [in LED]</pre>
</div>
<p><strong>action_cb</strong>:
  Name of the action generated when the user 
  types something.</p>
<p>Returns the identifier of the created 
  matrix, or NULL if an error occurs.</p>
<h3><a name="Attributes">Attributes</a></h3>


<h4>Cell Attributes</h4>
<dl>
  <dd><a href="iupmatrix_attrib.html#L:C">L:C</a></dd>
  <dd><a href="iupmatrix_attrib.html#ALIGNMENTn">ALIGNMENTn</a></dd>
  <dd><a href="iupmatrix_attrib.html#BGCOLOR">BGCOLOR</a></dd>
  <dd><a href="iupmatrix_attrib.html#FGCOLOR">FGCOLOR</a></dd>
  <dd><a href="iupmatrix_attrib.html#FONT">FONT</a><br>
	<a href="iupmatrix_attrib.html#FONT">FRAMEVERTCOLORL:C</a><em><br>
	</em><a href="iupmatrix_attrib.html#FONT">FRAMEHORIZCOLORL:C</a></dd>
  <dd><a href="iupmatrix_attrib.html#VALUE">VALUE</a></dd>
  <dd><a href="iupmatrix_attrib.html#MASKL:C">MASKL:C</a></dd>
</dl>
<h4>Column Attributes</h4>
<dl>
  <dd><a href="iupmatrix_attrib.html#RASTERWIDTHn">RASTERWIDTHn</a><strong><br>
	</strong><a href="iupmatrix_attrib.html#SORTSIGNn">SORTSIGNn</a><br>
	<a href="iupmatrix_attrib.html#WIDTHn">WIDTHn</a></dd>
	<dd><a href="iupmatrix_attrib.html#WIDTHDEF">WIDTHDEF</a></dd>
</dl>
<h4>Line Attributes</h4>
<dl>
  <dd><a href="iupmatrix_attrib.html#HEIGHTn">HEIGHTn</a><br>
	<a href="iupmatrix_attrib.html#HEIGHTDEF">HEIGHTDEF</a></dd>
  <dd><a href="iupmatrix_attrib.html#RASTERHEIGHTn">RASTERHEIGHTn</a></dd>
</dl>
<h4>Size Attributes</h4>
<dl>
  <dd><a href="iupmatrix_attrib.html#NUMCOL">NUMCOL</a></dd>
  <dd><a href="iupmatrix_attrib.html#NUMCOL_VISIBLE">NUMCOL_VISIBLE</a></dd>
  <dd><a href="iupmatrix_attrib.html#NUMLIN">NUMLIN</a></dd>
  <dd><a href="iupmatrix_attrib.html#NUMLIN_VISIBLE">NUMLIN_VISIBLE</a></dd>
</dl>
<h4>Mark Attributes</h4>
<dl>
  <dd><a href="iupmatrix_attrib.html#AREA">AREA</a></dd>
  <dd><a href="iupmatrix_attrib.html#MARK_MODE">MARK_MODE</a></dd>
  <dd><a href="iupmatrix_attrib.html#MARKED">MARKED</a></dd>
  <dd><a href="iupmatrix_attrib.html#MULTIPLE">MULTIPLE</a></dd>
</dl>
<h4>Action Attributes</h4>
<dl>
  <dd><a href="iupmatrix_attrib.html#ADDCOL">ADDCOL</a></dd>
  <dd><a href="iupmatrix_attrib.html#ADDLIN">ADDLIN</a></dd>
  <dd><a href="iupmatrix_attrib.html#DELCOL">DELCOL</a></dd>
  <dd><a href="iupmatrix_attrib.html#DELLIN">DELLIN</a></dd>
  <dd><a href="iupmatrix_attrib.html#EDIT_MODE">EDIT_MODE</a></dd>
  <dd><a href="iupmatrix_attrib.html#ORIGIN">ORIGIN</a></dd>
  <dd><a href="iupmatrix_attrib.html#REDRAW">REDRAW</a></dd>
</dl>
<h4>Edition Attributes</h4>
<dl>
  <dd><a href="iupmatrix_attrib.html#CARET">CARET</a></dd>
  <dd><a href="iupmatrix_attrib.html#SELECTION">SELECTION</a></dd>
</dl>
<h4>Canvas Attributes</h4>
<dl>
  <dd><a href="iupmatrix_attrib.html#SCROLLBAR">BORDER</a><br>
	<a href="iupmatrix_attrib.html#SCROLLBAR">SCROLLBAR</a></dd>
</dl>
<h4>General Attributes</h4>
<dl>
  <dd><a href="iupmatrix_attrib.html#CURSOR">CURSOR</a><br>
	<a href="iupmatrix_attrib.html#CURSOR">CHECKFRAMECOLOR</a><br>
	<a href="iupmatrix_attrib.html#FOCUS_CELL">FOCUS_CELL</a></dd>
  <dd><a href="iupmatrix_attrib.html#FRAMECOLOR">FRAMECOLOR</a></dd>
  <dd><a href="iupmatrix_attrib.html#HIDEFOCUS">HIDEFOCUS</a></dd>
	<dd><a href="iupmatrix_attrib.html#RESIZEMATRIX">RESIZEMATRIX</a></dd>
</dl>
<h3><a name="Callbacks">Callbacks</a></h3>

<h4>Interaction</h4>
<p class="info">
<a href="iupmatrix_cb.html#ACTION_CB">ACTION_CB</a> -
    Action generated when a keyboard event 
    occurs.<a href="iupmatrix_cb.html#CLICK_CB"><br>
    CLICK_CB</a> -
    Action generated when any mouse button is 
    pressed over a cell.<a href="iupmatrix_cb.html#DRAW_CB"><br>
</a><a href="iupmatrix_cb.html#RELEASE_CB">RELEASE_CB</a> -
    Action generated when any mouse button is 
    released over a cell.<a href="iupmatrix_cb.html#DRAW_CB"><br>
</a><a href="iupmatrix_cb.html#MOUSEMOVE_CB">MOUSEMOVE_CB</a> -
    Action generated to notify the application 
    that the mouse has moved over the matrix.<br>
<a href="iupmatrix_cb.html#ENTERITEM_CB">ENTERITEM_CB</a> -
    Action generated when a matrix cell is 
    selected, becoming the current cell.<a href="iupmatrix_cb.html#LEAVEITEM_CB"><br>
    LEAVEITEM_CB</a> -
    Action generated when a cell is no longer 
    the current cell.<br>
<a href="iupmatrix_cb.html#SCROLL_CB">SCROLLTOP_CB</a> -
    Action generated when the matrix is scrolled 
    with the scrollbars or with the keyboard.</p>
<h4>Drawing</h4>
<p class="info">
<a href="iupmatrix_cb.html#BGCOLOR_CB">BGCOLOR_CB</a> -
    Action generated to retrieve the background 
    color of a cell when it needs to be redrawn. 
    <br>
    <a href="iupmatrix_cb.html#FGCOLOR_CB">FGCOLOR_CB</a> -
    Action generated to retrieve the foreground 
    color of a cell when it needs to be redrawn. 
    <br>
    <a href="iupmatrix_cb.html#DRAW_CB">DRAW_CB</a> -
    Action generated before the cell is drawn. 
    Allow a custom cell draw.<br>
<a href="iupmatrix_cb.html#DROPCHECK_CB">DROPCHECK_CB</a> -
    Action generated to determine if a dropdown 
    feedback should be shown.</p>
<h4>Editing</h4>
<p class="info">
<a href="iupmatrix_cb.html#DROP_CB">DROP_CB</a> -
    Action generated to determine if a text 
    field or a dropdown will be shown.<br>
<a href="iupmatrix_cb.html#DROPSELECT_CB">DROPSELECT_CB</a> -
    Action generated when an element in the 
    dropdown list is selected.<a href="iupmatrix_cb.html#EDITION_CB"><br>
    EDITION_CB</a> -
    Action generated when the current cell 
    enters or leaves the edition mode.</p>
<h4>Callback Mode</h4>
<p class="info">
<a href="iupmatrix_cb.html#VALUE_CB">VALUE_CB</a> -
    Action generated to verify the value of a 
    cell. 
    <br>
<a href="iupmatrix_cb.html#VALUE_EDIT_CB">VALUE_EDIT_CB</a> -
    Action generated to notify the application 
    that the value of a cell was edited. <br>
<a href="iupmatrix_cb.html#MARK_CB">MARK_CB</a> -
    Action generated to verify the selection 
    state of a cell. <a href="iupmatrix_cb.html#MARKEDIT_CB"><br>
    MARKEDIT_CB</a> -
    Action generated to notify the application 
    that the selection state of a cell was changed. 
  </p>
<h3>Additional Methods in Lua</h3>
<pre><strong>elem</strong>:setcell(<strong>lin, col</strong>: number, <strong>value</strong>: string)</pre>
<p>Modifies the text of a cell.</p>
<pre><strong>elem</strong>:getcell(<strong>lin, col</strong>: number) -&gt; (<strong>cell</strong>: string)</pre>
<p>Returns the text of a cell.</p>
<h3>Utility Functions </h3>
<p>These functions can be used to help set and get attributes from the matrix:</p>
<pre>void  IupMatSetAttribute(Ihandle*h, const char* a, int l, int c, char* v);
void  IupMatStoreAttribute(Ihandle* ih, const char* a, int l, int c, char* v);
char* IupMatGetAttribute(Ihandle* ih, const char* a, int l, int c);
int   IupMatGetInt(Ihandle* ih, const char* a, int l, int c);
float IupMatGetFloat(Ihandle* ih, const char* a, int l, int c);
void  IupMatSetfAttribute(Ihandle* ih, const char* a, int l, int c, const char* f, ...);</pre>
<p>They work just like the respective tradicional set and get functions. But the attribute string is complemented with 
  the L and C values. For ex:</p>
<pre>IupMatSetAttribute(ih, &quot;&quot; , 30, 10, v) = IupSetAttribute(n, &quot;30:10&quot;, v)
IupMatSetAttribute(ih, &quot;BGCOLOR&quot; , 30, 10, v) = IupSetAttribute(n, &quot;BGCOLOR30:10&quot;, v)
IupMatSetAttribute(ih, &quot;ALIGNMENT&quot; , 10, 0, v) = IupSetAttribute(n, &quot;ALIGNMENT10:0&quot;, v)  (*)
    (*) noticed that in this case the second value will be ignored.</pre>
<p>These functions are not available in Lua, since you can simply write:</p>
<pre>elem[&quot;bgcolor&quot;..l..&quot;:&quot;..c] = v
   or
elem[&quot;bgcolor30:10&quot;] = v</pre>
<h3><a name="Notes">Notes</a></h3>
<h4>Titles</h4>
<p>A matrix might have titles for lines and 
  columns. This must be defined before the matrix is mapped, and cannot be changed afterwards. A matrix will have 
a line 
  of titles if, before mapped, an attribute of the L:0 type is defined. It will have 
a column of titles if, before mapped, an attribute of the 0:C type is defined.</p>
<p>If the width of the column of titles is not defined (WIDTH0), then its size is given by the size of the largest title defined when the 
  matrix is mapped. <span class="style1"><strong>CHECK THIS.</strong></span></p>
<p>Titles (for lines or columns) can be 
  generated with more that one text line. For such, the title value must contain a \n. 
<span class="style1">The matrix does not by itself change the 
  lines height to fit titles with multiple lines. The user must change the lines size manually, by using attribute
  HEIGHTn. In IUPs size definition, a line with height 8 will fit one text line, a line with height 16 
  will fit two text lines, and so on.</span></p>
<p>When allowed the
  width of a column can be changed holding and dragging its title right border, 
see RESIZEMATRIX. 
</p>
<h4>Callback Mode</h4>
<p>Very large matrices must use the callback 
  mode to set the values, and not the regular 
  value attributes of the cells. The idea is the following:</p>
<p>1 -
    Register the VALUE_CB callback<br>
    2 -
    No longer set the value of the cells. They 
    will be set one by one by the callback. Note that the values of the cells must now be stored by the user.<br>
    3 -
    If the matrix is editable, set the VALUE_EDIT_CB callback.<br>
    4 -
    When the matrix must be invalidated, use the REDRAW attribute to force a matrix redraw.</p>
<p>A negative aspect is that, when VALUE_CB is defined, the matrix never verifies attributes of type %d:%d. Therefore, it also does not verify line and column titles (which must be given by the 
  callback). The result is that, at the moment the matrix is created, it resorts solely to the existence of attributes
  WIDTH0 and HEIGHT0 to find out if it will have line or column titles. That is, for such matrices to have 
  titles, the WIDTH0 and HEIGHT0 attributes must be defined. This problem is not serious, because with IUPs definition 
  of SIZE, HEIGHT0=8 will always produce a column title in the size desired.</p>
<p>Another important reminder: if VALUE_CB is defined and VALUE_EDIT_CB is not, it is absolutely necessary that the application does not allow the user to edit any 
  cell. This must be done by returning IUP_IGNORE in the IUP_EDITION_CB callback. (In the future, this will be done inside the matrix.)</p>
<h4>Keyboard Navigation</h4>
<p>Keyboard navigating through the matrix cells outside the edition 
  mode is done by using the following keys:</p>
<ul>
  <li><strong>Arrows</strong>: Moves the focus to the next cell, according to 
    the arrows direction.</li>
  <li><strong>Page Up</strong> and <strong>Page Down</strong>: Moves a visible page up or down.</li>
  <li><strong>Home</strong>: Moves the focus to the fist column in the line.</li>
  <li><strong>Home</strong> <strong>Home</strong>: Moves the focus to the upper left corner of the 
    visible page.</li>
  <li><strong>Home</strong> <strong>Home</strong> <strong>Home</strong>: 
    Moves the focus to the upper left corner of the 
    first page of the matrix.</li>
  <li><strong>End</strong>: Moves the focus to the last column in the line.</li>
  <li><strong>End</strong> <strong>End</strong>: Moves the focus to the lower right corner of the 
    visible page.</li>
  <li><strong>End</strong> <strong>End</strong> <strong>End</strong>: Moves the focus to the lower right corner of the 
    last page in the matrix.</li>
</ul>
<p>Inside the <b>edition mode</b>, the 
  following keys are used 
  for a text field:</p>
<ul>
  <li><strong>Up and down arrows</strong>:
    Leave the edition mode and moves the focus 
    accordingly.</li>
  <li><strong>Left and right arrows</strong>:
    If the caret is at the extremes of the text 
    being edited then leave the edition mode and moves the focus accordingly.</li>
  <li><strong>Ctrl + Arrows</strong>:
    Leave the edition mode and moves the focus 
    accordingly.</li>
</ul>
<p>When the matrix is outside the edition mode, pressing any character key makes the current key to enter in the edition 
  mode, the old text is replaced by the new one being typed. If <b>Enter</b> or 
<b>Space</b> is pressed, the current 
  cell enters the edition mode with the current text of the cell. If <b>Del</b> is pressed, the whole contents of the 
  cell will be 
  deleted. Double-clicking a cell also 
  enters the edition mode. In Motif, when start editing using a double click, the 
  user must click again to the edit control get the focus.</p>
<p>When the matrix is in the edition mode, to confirm the entered value, press 
<b>Enter</b>. 
  By pressing <b>Esc</b>, the previous value is restored. The cell will also leave the edition mode if the user clicked 
  in another cell or in another control, then the value will be confirmed. When pressing 
<b>Enter</b> 
  to confirm the value the focus goes to the cell bellow the current cell, if at the last line then the focus goes to 
  the cell on the left. The value confirmation depends on the
  EDITION_CB callback return code.</p>
<h4>Marks</h4>
<p>When mark mode is active the cells can be marked using mouse, if the keyboard is used all marks are cleared.</p>
<p>A marked cell will have its background attenuated to indicate that it is marked.</p>
<p>Cells can be selected individually or the marks can be restricted to lines and/or columns. Also multiple cells can 
  be marked simultaneously in continuous or in segmented areas. Lines and columns are marked only when the user clicks 
  in their respective titles. Continuous areas are marked holding and dragging the mouse or holding the 
<b>Shift</b> 
  key. Segmented areas are marked holding the <b>Ctrl</b> key.</p>
<h3><a name="Examples">Examples</a></h3>
<p><a href="../../examples/">Browse for Example Files</a></p>
<p>Creates a simple matrix with the values and 
  layout shown in the image below. There is also a menu that allows making some changes to the matrix.</p>
<p align="center">
<img src="iupmatrix.gif" alt="iupmatrx.gif (125Kb)" width="299" height="142"></p>
<h3><a name="SeeAlso">See Also</a></h3>

<p><a href="../elem/iupcanvas.html">IupCanvas</a></p>

</body>

</html>